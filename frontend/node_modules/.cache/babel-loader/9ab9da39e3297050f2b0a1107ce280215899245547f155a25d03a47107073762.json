{"ast":null,"code":"import _regeneratorRuntime from\"/Users/code/Desktop/Desktop - WEB/WEB/lab-sistemas/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/code/Desktop/Desktop - WEB/WEB/lab-sistemas/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/code/Desktop/Desktop - WEB/WEB/lab-sistemas/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/code/Desktop/Desktop - WEB/WEB/lab-sistemas/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import React,{useState,useContext,useEffect}from\"react\";import{AppContext}from\"../App\";import{converter}from\"../binconverter.js\";import{useQuery,useMutation,gql}from\"@apollo/client\";import{jsx as _jsx}from\"react/jsx-runtime\";export var GET_CLIENTS=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  query {\\n    clients {\\n      id\\n      state\\n    }\\n  }\\n\"])));export var EDIT_CLIENT=gql(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  mutation editClient($editClientObject: EditClientInput!) {\\n    editClient(editClientObject: $editClientObject) {\\n      id\\n      state\\n    }\\n  }\\n\"])));var LED=function LED(props){var _useMutation=useMutation(EDIT_CLIENT),_useMutation2=_slicedToArray(_useMutation,2),editClient=_useMutation2[0],editClientInfo=_useMutation2[1];var handleEdit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id,value){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return editClient({variables:{editClientObject:{id:id,state:value}}});case 2:result=_context.sent;case 3:case\"end\":return _context.stop();}},_callee);}));return function handleEdit(_x,_x2){return _ref.apply(this,arguments);};}();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),counter=_useState2[0],setCounter=_useState2[1];var _useContext=useContext(AppContext),setBin=_useContext.setBin;var _useQuery=useQuery(GET_CLIENTS),data=_useQuery.data,loading=_useQuery.loading,error=_useQuery.error;useEffect(function(){if(data&&data.clients){setCounter(parseInt(data.clients[props.number].state),2);}},[data]);var increment=function increment(){if(counter<100){handleEdit(data.clients[props.number].id,(counter+25).toString());setCounter(counter+25);}else{handleEdit(data.clients[props.number].id,\"0\");setCounter(0);}};if(counter==0){return/*#__PURE__*/_jsx(\"div\",{className:\"LedSquare ledOff\",onClick:increment});}else if(counter==25){return/*#__PURE__*/_jsx(\"div\",{className:\"LedSquare ledOn25\",onClick:increment});}else if(counter==50){return/*#__PURE__*/_jsx(\"div\",{className:\"LedSquare ledOn50\",onClick:increment});}else if(counter==75){return/*#__PURE__*/_jsx(\"div\",{className:\"LedSquare ledOn75\",onClick:increment});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"LedSquare ledOn100\",onClick:increment});}};export default LED;","map":{"version":3,"names":["React","useState","useContext","useEffect","AppContext","converter","useQuery","useMutation","gql","GET_CLIENTS","EDIT_CLIENT","LED","props","editClient","editClientInfo","handleEdit","id","value","variables","editClientObject","state","result","counter","setCounter","setBin","data","loading","error","clients","parseInt","number","increment","toString"],"sources":["/Users/code/Desktop/Desktop - WEB/WEB/lab-sistemas/frontend/src/Components/LED.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport { AppContext } from \"../App\";\nimport {converter} from \"../binconverter.js\"\nimport { useQuery, useMutation, gql } from \"@apollo/client\";\n\nexport const GET_CLIENTS = gql`\n  query {\n    clients {\n      id\n      state\n    }\n  }\n`;\n\nexport const EDIT_CLIENT = gql`\n  mutation editClient($editClientObject: EditClientInput!) {\n    editClient(editClientObject: $editClientObject) {\n      id\n      state\n    }\n  }\n`;\n\nconst LED = (props) => {\n\n    const [editClient, editClientInfo] = useMutation(EDIT_CLIENT);\n\n    const handleEdit = async (id, value) => {\n        const result = await editClient({\n          variables: {\n            editClientObject: {\n              id: id,\n              state: value\n            }\n          }\n        });\n      };\n\n\n    const [counter, setCounter] = useState(0);\n    const {setBin} = useContext(AppContext)\n    const { data, loading, error } = useQuery(GET_CLIENTS);\n  \n    useEffect(() => {\n      if (data && data.clients) {\n        setCounter(parseInt(data.clients[props.number].state), 2);\n      }\n    }, [data]);\n\n    const increment = () => {\n        if(counter < 100)\n        { \n            handleEdit(data.clients[props.number].id,(counter+25).toString());\n            setCounter(counter+25); \n        }else \n        {\n            handleEdit(data.clients[props.number].id, \"0\")\n            setCounter(0);  \n        }\n             \n    }; \n    if(counter == 0)\n    {\n        return(\n            <div className='LedSquare ledOff' onClick={increment}>\n                \n        </div>\n    );\n    }else if(counter == 25)\n    {\n        return(\n            <div className='LedSquare ledOn25' onClick={increment}>\n               \n           </div>\n        );  \n    }else if(counter == 50)\n    {\n        return(\n            <div className='LedSquare ledOn50' onClick={increment}>\n               \n           </div>\n        );  \n    }else if(counter == 75)\n    {\n        return(\n            <div className='LedSquare ledOn75' onClick={increment}>\n                \n           </div>\n        );  \n    }else\n    {\n        return(\n            <div className='LedSquare ledOn100' onClick={increment}>\n                \n           </div>\n        );  \n    }\n};\nexport default LED;\n"],"mappings":"yoBAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAC9D,OAASC,UAAU,KAAQ,QAAQ,CACnC,OAAQC,SAAS,KAAO,oBAAoB,CAC5C,OAASC,QAAQ,CAAEC,WAAW,CAAEC,GAAG,KAAQ,gBAAgB,CAAC,2CAE5D,MAAO,IAAMC,YAAW,CAAGD,GAAG,gIAO7B,CAED,MAAO,IAAME,YAAW,CAAGF,GAAG,6NAO7B,CAED,GAAMG,IAAG,CAAG,QAANA,IAAG,CAAIC,KAAK,CAAK,CAEnB,iBAAqCL,WAAW,CAACG,WAAW,CAAC,8CAAtDG,UAAU,kBAAEC,cAAc,kBAEjC,GAAMC,WAAU,4FAAG,iBAAOC,EAAE,CAAEC,KAAK,oJACVJ,WAAU,CAAC,CAC9BK,SAAS,CAAE,CACTC,gBAAgB,CAAE,CAChBH,EAAE,CAAEA,EAAE,CACNI,KAAK,CAAEH,KACT,CACF,CACF,CAAC,CAAC,QAPII,MAAM,oEAQb,kBATGN,WAAU,gDASb,CAGH,cAA8Bd,QAAQ,CAAC,CAAC,CAAC,wCAAlCqB,OAAO,eAAEC,UAAU,eAC1B,gBAAiBrB,UAAU,CAACE,UAAU,CAAC,CAAhCoB,MAAM,aAANA,MAAM,CACb,cAAiClB,QAAQ,CAACG,WAAW,CAAC,CAA9CgB,IAAI,WAAJA,IAAI,CAAEC,OAAO,WAAPA,OAAO,CAAEC,KAAK,WAALA,KAAK,CAE5BxB,SAAS,CAAC,UAAM,CACd,GAAIsB,IAAI,EAAIA,IAAI,CAACG,OAAO,CAAE,CACxBL,UAAU,CAACM,QAAQ,CAACJ,IAAI,CAACG,OAAO,CAAChB,KAAK,CAACkB,MAAM,CAAC,CAACV,KAAK,CAAC,CAAE,CAAC,CAAC,CAC3D,CACF,CAAC,CAAE,CAACK,IAAI,CAAC,CAAC,CAEV,GAAMM,UAAS,CAAG,QAAZA,UAAS,EAAS,CACpB,GAAGT,OAAO,CAAG,GAAG,CAChB,CACIP,UAAU,CAACU,IAAI,CAACG,OAAO,CAAChB,KAAK,CAACkB,MAAM,CAAC,CAACd,EAAE,CAAC,CAACM,OAAO,CAAC,EAAE,EAAEU,QAAQ,EAAE,CAAC,CACjET,UAAU,CAACD,OAAO,CAAC,EAAE,CAAC,CAC1B,CAAC,IACD,CACIP,UAAU,CAACU,IAAI,CAACG,OAAO,CAAChB,KAAK,CAACkB,MAAM,CAAC,CAACd,EAAE,CAAE,GAAG,CAAC,CAC9CO,UAAU,CAAC,CAAC,CAAC,CACjB,CAEJ,CAAC,CACD,GAAGD,OAAO,EAAI,CAAC,CACf,CACI,mBACI,YAAK,SAAS,CAAC,kBAAkB,CAAC,OAAO,CAAES,SAAU,EAEnD,CAEV,CAAC,IAAK,IAAGT,OAAO,EAAI,EAAE,CACtB,CACI,mBACI,YAAK,SAAS,CAAC,mBAAmB,CAAC,OAAO,CAAES,SAAU,EAEjD,CAEb,CAAC,IAAK,IAAGT,OAAO,EAAI,EAAE,CACtB,CACI,mBACI,YAAK,SAAS,CAAC,mBAAmB,CAAC,OAAO,CAAES,SAAU,EAEjD,CAEb,CAAC,IAAK,IAAGT,OAAO,EAAI,EAAE,CACtB,CACI,mBACI,YAAK,SAAS,CAAC,mBAAmB,CAAC,OAAO,CAAES,SAAU,EAEjD,CAEb,CAAC,IACD,CACI,mBACI,YAAK,SAAS,CAAC,oBAAoB,CAAC,OAAO,CAAEA,SAAU,EAElD,CAEb,CACJ,CAAC,CACD,cAAepB,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}